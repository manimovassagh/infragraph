{
  "version": 4,
  "terraform_version": "1.7.0",
  "serial": 71,
  "lineage": "u1v2w3x4-multi-tier",
  "resources": [
    {
      "mode": "managed",
      "type": "aws_vpc",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "vpc-app001", "cidr_block": "10.50.0.0/16", "enable_dns_hostnames": true, "enable_dns_support": true, "tags": { "Name": "app-vpc", "Environment": "production" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "web_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-web-a", "vpc_id": "vpc-app001", "cidr_block": "10.50.1.0/24", "availability_zone": "us-east-1a", "map_public_ip_on_launch": true, "tags": { "Name": "web-tier-a", "Tier": "public" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "web_b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-web-b", "vpc_id": "vpc-app001", "cidr_block": "10.50.2.0/24", "availability_zone": "us-east-1b", "map_public_ip_on_launch": true, "tags": { "Name": "web-tier-b", "Tier": "public" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "app_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-app-a", "vpc_id": "vpc-app001", "cidr_block": "10.50.10.0/24", "availability_zone": "us-east-1a", "map_public_ip_on_launch": false, "tags": { "Name": "app-tier-a", "Tier": "private" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "app_b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-app-b", "vpc_id": "vpc-app001", "cidr_block": "10.50.11.0/24", "availability_zone": "us-east-1b", "map_public_ip_on_launch": false, "tags": { "Name": "app-tier-b", "Tier": "private" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "db_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-db-a", "vpc_id": "vpc-app001", "cidr_block": "10.50.20.0/24", "availability_zone": "us-east-1a", "map_public_ip_on_launch": false, "tags": { "Name": "db-tier-a", "Tier": "private" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_lb",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/web-alb/abc", "name": "web-alb", "load_balancer_type": "application", "security_groups": ["sg-web001"], "subnets": ["subnet-web-a", "subnet-web-b"], "tags": { "Name": "web-alb" } }, "dependencies": ["aws_subnet.web_a", "aws_subnet.web_b", "aws_security_group.web"] }]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:elasticloadbalancing:tg/web-tg/abc", "name": "web-tg", "port": 80, "protocol": "HTTP", "vpc_id": "vpc-app001", "target_type": "instance", "tags": { "Name": "web-tg" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "sg-web001", "vpc_id": "vpc-app001", "name": "web-sg", "tags": { "Name": "web-sg" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "sg-app001", "vpc_id": "vpc-app001", "name": "app-sg", "tags": { "Name": "app-sg" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "db",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "sg-db001", "vpc_id": "vpc-app001", "name": "db-sg", "tags": { "Name": "db-sg" } }, "dependencies": ["aws_vpc.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_instance",
      "name": "app_server",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "i-app001", "ami": "ami-0abcdef1234567890", "instance_type": "t3.medium", "subnet_id": "subnet-app-a", "vpc_security_group_ids": ["sg-app001"], "tags": { "Name": "app-server" } }, "dependencies": ["aws_subnet.app_a", "aws_security_group.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "mysql",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "db-mysql001", "identifier": "app-mysql", "engine": "mysql", "engine_version": "8.0", "instance_class": "db.r6g.large", "allocated_storage": 100, "multi_az": true, "subnet_id": "subnet-db-a", "vpc_security_group_ids": ["sg-db001"], "tags": { "Name": "app-mysql" } }, "dependencies": ["aws_subnet.db_a", "aws_security_group.db"] }]
    },
    {
      "mode": "managed",
      "type": "aws_elasticache_cluster",
      "name": "redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "app-redis", "cluster_id": "app-redis", "engine": "redis", "node_type": "cache.r6g.large", "num_cache_nodes": 1, "port": 6379, "security_group_ids": ["sg-app001"], "tags": { "Name": "app-redis" } }, "dependencies": ["aws_security_group.app"] }]
    },
    {
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "igw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "igw-app001", "vpc_id": "vpc-app001", "tags": { "Name": "app-igw" } }, "dependencies": ["aws_vpc.app"] }]
    }
  ]
}
