{
  "version": 4,
  "terraform_version": "1.7.0",
  "serial": 55,
  "lineage": "e5f6g7h8-eks-cluster",
  "resources": [
    {
      "mode": "managed",
      "type": "aws_vpc",
      "name": "eks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "vpc-eks001", "cidr_block": "10.10.0.0/16", "enable_dns_hostnames": true, "enable_dns_support": true, "tags": { "Name": "eks-vpc" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "eks_private_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-eksprv-a", "vpc_id": "vpc-eks001", "cidr_block": "10.10.1.0/24", "availability_zone": "us-east-1a", "map_public_ip_on_launch": false, "tags": { "Name": "eks-private-a", "Tier": "private" } }, "dependencies": ["aws_vpc.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "eks_private_b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-eksprv-b", "vpc_id": "vpc-eks001", "cidr_block": "10.10.2.0/24", "availability_zone": "us-east-1b", "map_public_ip_on_launch": false, "tags": { "Name": "eks-private-b", "Tier": "private" } }, "dependencies": ["aws_vpc.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "eks_public_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-ekspub-a", "vpc_id": "vpc-eks001", "cidr_block": "10.10.10.0/24", "availability_zone": "us-east-1a", "map_public_ip_on_launch": true, "tags": { "Name": "eks-public-a", "Tier": "public" } }, "dependencies": ["aws_vpc.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_eks_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "prod-eks-cluster", "name": "prod-eks", "version": "1.28", "role_arn": "arn:aws:iam::123456789012:role/eks-role", "tags": { "Name": "prod-eks" } }, "dependencies": ["aws_subnet.eks_private_a", "aws_subnet.eks_private_b", "aws_security_group.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_eks_node_group",
      "name": "workers",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "prod-eks:workers", "cluster_name": "prod-eks", "node_group_name": "workers", "instance_types": ["t3.large"], "scaling_config": { "desired_size": 3, "max_size": 10, "min_size": 1 }, "tags": { "Name": "eks-workers" } }, "dependencies": ["aws_eks_cluster.main"] }]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "eks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "sg-eks001", "vpc_id": "vpc-eks001", "name": "eks-cluster-sg", "tags": { "Name": "eks-cluster-sg" } }, "dependencies": ["aws_vpc.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_lb",
      "name": "ingress",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/eks-alb/abc", "name": "eks-alb", "load_balancer_type": "application", "security_groups": ["sg-eks001"], "subnets": ["subnet-ekspub-a"], "tags": { "Name": "eks-alb" } }, "dependencies": ["aws_subnet.eks_public_a", "aws_security_group.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "postgres",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "db-ekspg001", "identifier": "eks-postgres", "engine": "postgres", "engine_version": "15.4", "instance_class": "db.r6g.xlarge", "allocated_storage": 200, "multi_az": true, "vpc_security_group_ids": ["sg-eks001"], "tags": { "Name": "eks-postgres" } }, "dependencies": ["aws_security_group.eks"] }]
    },
    {
      "mode": "managed",
      "type": "aws_elasticache_cluster",
      "name": "redis",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "eks-redis", "cluster_id": "eks-redis", "engine": "redis", "node_type": "cache.r6g.large", "num_cache_nodes": 1, "port": 6379, "tags": { "Name": "eks-redis" } }, "dependencies": ["aws_security_group.eks"] }]
    }
  ]
}
