{
  "version": 4,
  "terraform_version": "1.7.0",
  "serial": 19,
  "lineage": "k7l8m9n0-monitoring",
  "resources": [
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "/app/production", "name": "/app/production", "retention_in_days": 90, "tags": { "Name": "app-logs" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "/app/access-logs", "name": "/app/access-logs", "retention_in_days": 365, "tags": { "Name": "access-logs" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "cpu",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "high-cpu", "alarm_name": "high-cpu-utilization", "metric_name": "CPUUtilization", "namespace": "AWS/EC2", "threshold": 80, "tags": { "Name": "cpu-alarm" } }, "dependencies": ["aws_sns_topic.alerts"] }]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "memory",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "high-memory", "alarm_name": "high-memory-utilization", "metric_name": "MemoryUtilization", "threshold": 85, "tags": { "Name": "memory-alarm" } }, "dependencies": ["aws_sns_topic.alerts"] }]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "errors",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "high-errors", "alarm_name": "high-error-rate", "metric_name": "5XXError", "namespace": "AWS/ApiGateway", "threshold": 10, "tags": { "Name": "error-alarm" } }, "dependencies": ["aws_sns_topic.critical"] }]
    },
    {
      "mode": "managed",
      "type": "aws_cloudwatch_dashboard",
      "name": "overview",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "production-overview", "dashboard_name": "production-overview", "tags": {} }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "alerts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:sns:us-east-1:123456789012:monitoring-alerts", "name": "monitoring-alerts", "tags": { "Name": "alerts-topic" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "critical",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:sns:us-east-1:123456789012:critical-alerts", "name": "critical-alerts", "tags": { "Name": "critical-alerts" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_kinesis_firehose_delivery_stream",
      "name": "logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "log-archive-stream", "name": "log-archive-stream", "destination": "s3", "tags": { "Name": "log-archive" } }, "dependencies": ["aws_s3_bucket.archive", "aws_iam_role.firehose"] }]
    },
    {
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "archive",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "monitoring-log-archive", "bucket": "monitoring-log-archive", "tags": { "Name": "log-archive" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "notifier",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "slack-notifier", "function_name": "slack-alert-notifier", "runtime": "nodejs20.x", "handler": "index.handler", "tags": { "Name": "slack-notifier" } }, "dependencies": ["aws_iam_role.firehose"] }]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "firehose",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "firehose-role", "name": "firehose-log-role", "tags": { "Name": "firehose-role" } }, "dependencies": [] }]
    }
  ]
}
