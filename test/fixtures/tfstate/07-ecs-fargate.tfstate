{
  "version": 4,
  "terraform_version": "1.7.0",
  "serial": 39,
  "lineage": "y5z6a7b8-ecs-fargate",
  "resources": [
    {
      "mode": "managed",
      "type": "aws_vpc",
      "name": "ecs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "vpc-ecs001", "cidr_block": "10.60.0.0/16", "enable_dns_hostnames": true, "tags": { "Name": "ecs-vpc" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-ecsprv-a", "vpc_id": "vpc-ecs001", "cidr_block": "10.60.1.0/24", "availability_zone": "us-west-2a", "map_public_ip_on_launch": false, "tags": { "Name": "ecs-private-a", "Tier": "private" } }, "dependencies": ["aws_vpc.ecs"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private_b",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-ecsprv-b", "vpc_id": "vpc-ecs001", "cidr_block": "10.60.2.0/24", "availability_zone": "us-west-2b", "map_public_ip_on_launch": false, "tags": { "Name": "ecs-private-b", "Tier": "private" } }, "dependencies": ["aws_vpc.ecs"] }]
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public_a",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "subnet-ecspub-a", "vpc_id": "vpc-ecs001", "cidr_block": "10.60.10.0/24", "availability_zone": "us-west-2a", "map_public_ip_on_launch": true, "tags": { "Name": "ecs-public-a", "Tier": "public" } }, "dependencies": ["aws_vpc.ecs"] }]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:ecs:us-west-2:123456789012:cluster/fargate-platform", "name": "fargate-platform", "tags": { "Name": "fargate-cluster" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "web-app:5", "family": "web-app", "requires_compatibilities": ["FARGATE"], "cpu": "256", "memory": "512", "tags": { "Name": "web-task" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "api-service:3", "family": "api-service", "requires_compatibilities": ["FARGATE"], "cpu": "512", "memory": "1024", "tags": { "Name": "api-task" } }, "dependencies": [] }]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:ecs:us-west-2:123456789012:service/web-service", "name": "web-service", "cluster": "fargate-platform", "desired_count": 2, "launch_type": "FARGATE", "tags": { "Name": "web-service" } }, "dependencies": ["aws_ecs_cluster.main", "aws_ecs_task_definition.web", "aws_lb_target_group.web"] }]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_service",
      "name": "api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:ecs:us-west-2:123456789012:service/api-service", "name": "api-service", "cluster": "fargate-platform", "desired_count": 3, "launch_type": "FARGATE", "tags": { "Name": "api-service" } }, "dependencies": ["aws_ecs_cluster.main", "aws_ecs_task_definition.api"] }]
    },
    {
      "mode": "managed",
      "type": "aws_lb",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:elasticloadbalancing:us-west-2:123456789012:loadbalancer/app/ecs-alb/xyz", "name": "ecs-alb", "load_balancer_type": "application", "security_groups": ["sg-ecs001"], "subnets": ["subnet-ecspub-a"], "tags": { "Name": "ecs-alb" } }, "dependencies": ["aws_subnet.public_a", "aws_security_group.ecs"] }]
    },
    {
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 0, "attributes": { "id": "arn:aws:elasticloadbalancing:tg/web-tg/xyz", "name": "web-tg", "port": 80, "protocol": "HTTP", "vpc_id": "vpc-ecs001", "target_type": "ip", "tags": { "Name": "web-tg" } }, "dependencies": ["aws_vpc.ecs"] }]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "ecs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [{ "schema_version": 1, "attributes": { "id": "sg-ecs001", "vpc_id": "vpc-ecs001", "name": "ecs-tasks-sg", "tags": { "Name": "ecs-tasks-sg" } }, "dependencies": ["aws_vpc.ecs"] }]
    }
  ]
}
